<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Online Signature Generator | Draw & Type Signatures</title>
    <meta name="description" content="Create a transparent digital signature online. Draw or type your signature instantly. Free tool for PDF, Word, and DocuSign compatible files.">
    <!-- Load Handwriting Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Great+Vibes&family=Pacifico&family=Sacramento&family=Satisfy&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4f46e5;
            --bg: #f9fafb;
            --surface: #ffffff;
            --border: #e5e7eb;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: var(--bg);
            color: #1f2937;
            padding: 20px;
            margin: 0;
            line-height: 1.6;
        }

        .container { max-width: 900px; margin: 0 auto; }

        /* SEO Header */
        header { text-align: center; margin-bottom: 30px; }
        h1 { color: var(--primary); font-size: 2.2rem; margin-bottom: 0.5rem; }
        .intro { color: #4b5563; font-size: 1.1rem; }

        /* App Card */
        .app-card {
            background: var(--surface);
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            border: 1px solid var(--border);
        }

        /* Navigation */
        .nav-tabs { display: flex; background: #f3f4f6; border-bottom: 1px solid var(--border); }
        .nav-btn {
            flex: 1; padding: 15px; border: none; background: transparent;
            font-weight: 600; color: #6b7280; cursor: pointer; font-size: 1rem;
        }
        .nav-btn.active { background: var(--surface); color: var(--primary); border-top: 3px solid var(--primary); }

        /* Main Workspace */
        .workspace { padding: 25px; display: flex; flex-direction: column; align-items: center; }

        /* Drawing Area */
        .canvas-box {
            position: relative;
            width: 100%;
            height: 300px;
            border: 2px dashed #9ca3af;
            border-radius: 8px;
            background-color: #ffffff;
            /* Lined paper effect */
            background-image: repeating-linear-gradient(transparent, transparent 49px, #f1f5f9 49px, #f1f5f9 50px);
            cursor: crosshair;
            overflow: hidden;
            touch-action: none; /* Stops mobile page scrolling */
        }
        
        canvas { display: block; width: 100%; height: 100%; }

        /* Typing Area */
        .type-area { width: 100%; display: none; margin-bottom: 20px; }
        .type-area.visible { display: block; }
        
        .type-input {
            width: 100%; padding: 12px; font-size: 1.2rem;
            border: 1px solid var(--border); border-radius: 8px;
            box-sizing: border-box; margin-bottom: 15px;
        }

        .fonts-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 10px;
        }
        .font-item {
            border: 1px solid var(--border); padding: 10px; text-align: center;
            border-radius: 6px; cursor: pointer; font-size: 1.2rem; background: #fff;
        }
        .font-item:hover { background: #f0f9ff; }
        .font-item.selected { border-color: var(--primary); background: #eff6ff; color: var(--primary); }

        /* Controls Toolbar */
        .toolbar {
            width: 100%; display: flex; flex-wrap: wrap; gap: 15px;
            align-items: center; justify-content: space-between;
            margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border);
        }

        .tool-group { display: flex; align-items: center; gap: 10px; }
        .label { font-size: 0.9rem; font-weight: 600; color: #374151; }
        
        input[type="color"] { border: none; background: none; width: 40px; height: 40px; cursor: pointer; }
        
        .btn {
            padding: 12px 25px; border-radius: 6px; font-weight: 600; cursor: pointer; border: none; transition: 0.2s;
        }
        .btn-clear { background: #fee2e2; color: #b91c1c; }
        .btn-save { background: var(--primary); color: white; }
        .btn:hover { opacity: 0.9; }

        /* SEO Footer */
        .info-section { margin-top: 40px; background: white; padding: 30px; border-radius: 8px; border: 1px solid var(--border); }
        .info-section h2 { font-size: 1.5rem; margin-top: 0; }
        .info-section p { color: #4b5563; }
        
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Signature Generator Pro</h1>
        <p class="intro">Create smooth e-signatures for Documents, Email, and PDFs.</p>
    </header>

    <div class="app-card">
        <nav class="nav-tabs">
            <button class="nav-btn active" id="tabDraw" onclick="setMode('draw')">✏️ Draw Signature</button>
            <button class="nav-btn" id="tabType" onclick="setMode('type')">⌨️ Type Signature</button>
        </nav>

        <div class="workspace">
            
            <!-- Type Controls -->
            <div id="typeControls" class="type-area">
                <input type="text" id="textInput" class="type-input" placeholder="Enter your Name..." maxlength="40">
                <div class="label" style="margin-bottom:8px">Select Font Style:</div>
                <div class="fonts-grid" id="fontsList"></div>
            </div>

            <!-- Canvas -->
            <div class="canvas-box" id="canvasContainer">
                <canvas id="sigCanvas"></canvas>
            </div>

            <!-- Bottom Toolbar -->
            <div class="toolbar">
                <div class="tool-group">
                    <div class="label">Color:</div>
                    <input type="color" id="penColor" value="#000000">
                </div>

                <div class="tool-group" id="penSizeControl">
                    <div class="label">Size:</div>
                    <input type="range" id="penSize" min="1" max="10" value="2">
                </div>

                <div class="tool-group">
                    <input type="checkbox" id="transparentCheck" checked style="width:18px; height:18px;">
                    <label for="transparentCheck" class="label" style="cursor:pointer">Transparent BG</label>
                </div>

                <div class="tool-group" style="margin-left: auto;">
                    <button class="btn btn-clear" onclick="clearCanvas()">Clear</button>
                    <button class="btn btn-save" onclick="downloadSignature()">Download Signature</button>
                </div>
            </div>
        </div>
    </div>

    <!-- SEO Content Area -->
    <div class="info-section">
        <h2>How to download a Transparent Signature?</h2>
        <p>1. Ensure the <strong>"Transparent BG"</strong> checkbox is ticked above.</p>
        <p>2. Draw your signature or type your name using our handwritten fonts.</p>
        <p>3. Click <strong>Download Signature</strong>. The file will save as a <strong>.PNG</strong> image.</p>
        <p>This image can be placed over any line in Word, Google Docs, or PDF files without blocking the background text.</p>
    </div>
</div>

<script>
    const canvas = document.getElementById('sigCanvas');
    const ctx = canvas.getContext('2d');
    const container = document.getElementById('canvasContainer');
    const textInput = document.getElementById('textInput');
    const fontsList = document.getElementById('fontsList');
    
    // Config
    let mode = 'draw';
    let isDrawing = false;
    let lastX = 0, lastY = 0;
    
    // Handwriting Fonts (Google Fonts)
    const fontOptions = [
        { name: "Classic", css: "'Dancing Script', cursive" },
        { name: "Elegant", css: "'Great Vibes', cursive" },
        { name: "Bold", css: "'Pacifico', cursive" },
        { name: "Simple", css: "'Sacramento', cursive" },
        { name: "Modern", css: "'Satisfy', cursive" }
    ];
    let selectedFont = fontOptions[0].css;

    // --- Init ---
    function init() {
        // Set canvas resolution
        resize();
        window.addEventListener('resize', resize);
        
        // Populate Fonts
        fontOptions.forEach((font, index) => {
            const div = document.createElement('div');
            div.className = `font-item ${index === 0 ? 'selected' : ''}`;
            div.style.fontFamily = font.css;
            div.innerText = "Signature";
            div.onclick = () => selectFont(div, font.css);
            fontsList.appendChild(div);
        });

        // Event Listeners for Draw
        canvas.addEventListener('mousedown', startDraw);
        canvas.addEventListener('mousemove', drawing);
        canvas.addEventListener('mouseup', stopDraw);
        canvas.addEventListener('mouseout', stopDraw);
        
        // Touch events (Fix for Mobile scrolling issues)
        canvas.addEventListener('touchstart', (e) => { e.preventDefault(); startDraw(e.touches[0]); }, {passive: false});
        canvas.addEventListener('touchmove', (e) => { e.preventDefault(); drawing(e.touches[0]); }, {passive: false});
        canvas.addEventListener('touchend', stopDraw);

        // Inputs
        document.getElementById('penColor').addEventListener('input', refresh);
        document.getElementById('penSize').addEventListener('input', refresh);
        textInput.addEventListener('input', refreshType);
    }

    // --- Core Logic ---

    function resize() {
        // We match canvas resolution to visual size
        canvas.width = container.offsetWidth;
        canvas.height = container.offsetHeight;
        if(mode === 'type') refreshType();
    }

    function setMode(newMode) {
        mode = newMode;
        ctx.clearRect(0,0, canvas.width, canvas.height);
        
        // Toggle UI
        document.getElementById('tabDraw').classList.toggle('active', mode === 'draw');
        document.getElementById('tabType').classList.toggle('active', mode === 'type');
        
        document.getElementById('typeControls').classList.toggle('visible', mode === 'type');
        document.getElementById('penSizeControl').style.display = mode === 'draw' ? 'flex' : 'none';
        
        canvas.style.cursor = mode === 'draw' ? 'crosshair' : 'default';
        
        if(mode === 'type') refreshType();
    }

    function refresh() {
        if(mode === 'type') refreshType();
    }

    function selectFont(element, fontName) {
        document.querySelectorAll('.font-item').forEach(el => el.classList.remove('selected'));
        element.classList.add('selected');
        selectedFont = fontName;
        refreshType();
    }

    // --- Draw Functions ---

    function startDraw(e) {
        if(mode !== 'draw') return;
        isDrawing = true;
        [lastX, lastY] = getPos(e);
    }

    function drawing(e) {
        if(!isDrawing || mode !== 'draw') return;
        
        const [x, y] = getPos(e);
        const color = document.getElementById('penColor').value;
        const size = document.getElementById('penSize').value;

        ctx.beginPath();
        ctx.moveTo(lastX, lastY);
        ctx.lineTo(x, y);
        ctx.strokeStyle = color;
        ctx.lineWidth = size;
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';
        ctx.stroke();

        [lastX, lastY] = [x, y];
    }

    function stopDraw() { isDrawing = false; }

    function getPos(e) {
        const rect = canvas.getBoundingClientRect();
        return [e.clientX - rect.left, e.clientY - rect.top];
    }

    function clearCanvas() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        if(mode === 'type') {
            textInput.value = '';
            refreshType(); // Clears screen
        }
    }

    // --- Type Function ---

    function refreshType() {
        if(mode !== 'type') return;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        const text = textInput.value;
        if(!text) return; // Empty

        const color = document.getElementById('penColor').value;
        let fontSize = 60; 
        
        // Auto-fit font size
        if(text.length > 10) fontSize = 40;
        if(text.length > 20) fontSize = 25;

        ctx.font = `${fontSize}px ${selectedFont}`;
        ctx.fillStyle = color;
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        
        ctx.fillText(text, canvas.width/2, canvas.height/2);
    }

    // --- FIXED DOWNLOAD LOGIC ---

    function downloadSignature() {
        const isTransparent = document.getElementById('transparentCheck').checked;
        let dataUrl;

        if (isTransparent) {
            dataUrl = canvas.toDataURL('image/png');
        } else {
            // Combine with white background
            const tempCanvas = document.createElement('canvas');
            tempCanvas.width = canvas.width;
            tempCanvas.height = canvas.height;
            const tCtx = tempCanvas.getContext('2d');
            
            tCtx.fillStyle = "#ffffff";
            tCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);
            tCtx.drawImage(canvas, 0, 0);
            
            dataUrl = tempCanvas.toDataURL('image/jpeg');
        }

        // --- THE FIX ---
        // 1. Create Link
        const link = document.createElement('a');
        // 2. Determine Extension
        const ext = isTransparent ? '.png' : '.jpg';
        link.download = `my-signature-${Date.now()}${ext}`;
        link.href = dataUrl;
        
        // 3. Append to BODY (Crucial for Firefox support)
        document.body.appendChild(link);
        
        // 4. Trigger Click
        link.click();
        
        // 5. Cleanup
        document.body.removeChild(link);
    }

    // Start App
    init();

</script>
</body>
</html>
