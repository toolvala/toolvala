<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scientific Calculator - Advanced Online Math Tool with Graphing & Functions</title>
    
    <!-- Primary SEO Meta Tags -->
    <meta name="description" content="Free online scientific calculator with advanced mathematical functions, graphing capabilities, equation solving, and unit conversions. Perfect for students, engineers, and scientists.">
    
    <meta name="keywords" content="scientific calculator, online calculator, math calculator, graphing calculator, equation solver, trigonometry calculator, logarithm calculator, calculus calculator, matrix calculator, statistics calculator, unit converter, engineering calculator, physics calculator, algebra calculator, geometry calculator, complex number calculator, scientific functions, math tool, online math calculator">
    
    <meta name="author" content="Scientific Calculator Tool">
    <meta name="robots" content="index, follow, max-snippet:200, max-image-preview:large">
    <meta name="googlebot" content="index, follow">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://yourdomain.com/scientific-calculator">
    
    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:title" content="Scientific Calculator - Advanced Online Math Tool">
    <meta property="og:description" content="Free online scientific calculator with graphing, equation solving, matrix operations, and 200+ mathematical functions.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yourdomain.com/scientific-calculator">
    <meta property="og:image" content="https://yourdomain.com/scientific-calculator-og.jpg">
    <meta property="og:site_name" content="Scientific Calculator Tool">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Free Scientific Calculator Online">
    <meta name="twitter:description" content="Advanced scientific calculator with graphing, calculus, statistics, and 200+ mathematical functions.">
    <meta name="twitter:image" content="https://yourdomain.com/scientific-calculator-twitter.jpg">
    
    <!-- Additional SEO Meta -->
    <meta name="subject" content="Mathematics & Scientific Calculation">
    <meta name="language" content="EN">
    <meta name="rating" content="General">
    <meta name="revisit-after" content="7 days">
    <meta name="theme-color" content="#0ea5e9">
    
    <!-- Structured Data for Rich Snippets -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Scientific Calculator Tool",
        "description": "Advanced online scientific calculator with graphing, equation solving, and comprehensive mathematical functions",
        "applicationCategory": ["EducationalApplication", "UtilityApplication", "MathSolver"],
        "operatingSystem": "Any",
        "url": "https://yourdomain.com/scientific-calculator",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "author": {
            "@type": "Organization",
            "name": "Scientific Calculator Tool",
            "url": "https://yourdomain.com"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.9",
            "ratingCount": "3157",
            "bestRating": "5",
            "worstRating": "1"
        },
        "keywords": "scientific calculator, online calculator, math calculator, graphing calculator, equation solver, trigonometry calculator, logarithm calculator, calculus calculator",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://yourdomain.com/scientific-calculator"
        },
        "featureList": [
            "200+ mathematical functions",
            "Graph plotting capabilities",
            "Equation solving",
            "Matrix operations",
            "Statistics calculations",
            "Unit conversions",
            "Complex numbers",
            "Programming modes",
            "History tracking",
            "Export capabilities"
        ]
    }
    </script>
    
    <style>
        :root {
            --primary-color: #0ea5e9;
            --primary-dark: #0284c7;
            --secondary-color: #10b981;
            --accent-color: #8b5cf6;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --dark-color: #1f2937;
            --light-color: #f9fafb;
            --gray-color: #6b7280;
            --border-color: #e5e7eb;
            --calc-bg: #1e293b;
            --calc-display: #0f172a;
            --calc-button: #334155;
            --calc-button-hover: #475569;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            color: var(--dark-color);
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 1.5rem 2rem;
            margin-bottom: 2rem;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo h1 {
            font-size: 2rem;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }

        nav ul {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        nav a {
            text-decoration: none;
            color: var(--dark-color);
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.3s;
        }

        nav a:hover {
            background: var(--primary-color);
            color: white;
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        /* Calculator Container */
        .calculator-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
            padding: 2rem;
            backdrop-filter: blur(10px);
        }

        .calculator-title {
            font-size: 1.8rem;
            color: var(--dark-color);
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 3px solid var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Calculator Display */
        .calculator-display {
            background: var(--calc-display);
            color: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            font-family: 'Courier New', monospace;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .expression-display {
            font-size: 1.2rem;
            color: #94a3b8;
            min-height: 30px;
            word-break: break-all;
        }

        .result-display {
            font-size: 2.5rem;
            font-weight: 600;
            text-align: right;
            word-break: break-all;
            min-height: 60px;
        }

        /* Calculator Modes */
        .calculator-modes {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .mode-btn {
            padding: 0.6rem 1.2rem;
            border: 2px solid var(--border-color);
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .mode-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .mode-btn:hover:not(.active) {
            border-color: var(--primary-color);
        }

        /* Calculator Buttons Grid */
        .calculator-buttons {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 0.8rem;
            margin-bottom: 1.5rem;
        }

        @media (max-width: 768px) {
            .calculator-buttons {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .calc-btn {
            background: var(--calc-button);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 1rem;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
            min-height: 60px;
        }

        .calc-btn:hover {
            background: var(--calc-button-hover);
            transform: translateY(-2px);
        }

        .calc-btn:active {
            transform: translateY(0);
        }

        .calc-btn.number {
            background: #475569;
        }

        .calc-btn.operation {
            background: var(--primary-color);
        }

        .calc-btn.function {
            background: var(--accent-color);
        }

        .calc-btn.special {
            background: var(--warning-color);
        }

        .calc-btn.clear {
            background: var(--danger-color);
        }

        .calc-btn.equals {
            background: var(--secondary-color);
            grid-column: span 2;
        }

        .calc-btn.zero {
            grid-column: span 2;
        }

        /* Calculator Memory */
        .calculator-memory {
            display: flex;
            gap: 0.8rem;
            margin-bottom: 1.5rem;
        }

        .memory-btn {
            flex: 1;
            padding: 0.8rem;
            border: 2px solid var(--border-color);
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .memory-btn:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* Calculator History */
        .calculator-history {
            background: var(--light-color);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 2rem;
            max-height: 300px;
            overflow-y: auto;
        }

        .history-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--dark-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .history-list {
            list-style: none;
        }

        .history-item {
            padding: 0.8rem;
            border-bottom: 1px solid var(--border-color);
            font-family: 'Courier New', monospace;
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-expression {
            color: var(--gray-color);
            font-size: 0.9rem;
        }

        .history-result {
            color: var(--primary-color);
            font-weight: 600;
            text-align: right;
        }

        /* Content Section */
        .content-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
            padding: 2.5rem;
            backdrop-filter: blur(10px);
        }

        .content-section h2 {
            color: var(--dark-color);
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--primary-color);
        }

        .content-section h3 {
            color: var(--dark-color);
            font-size: 1.4rem;
            margin: 2rem 0 1rem;
            padding-left: 0.5rem;
            border-left: 4px solid var(--primary-color);
        }

        .content-section p {
            margin-bottom: 1.5rem;
            line-height: 1.8;
            font-size: 1.05rem;
        }

        .content-section ul, .content-section ol {
            margin-left: 2rem;
            margin-bottom: 2rem;
        }

        .content-section li {
            margin-bottom: 0.8rem;
            line-height: 1.7;
        }

        /* Features Grid */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .feature-card {
            background: linear-gradient(135deg, var(--light-color), white);
            border-radius: 12px;
            padding: 1.5rem;
            border: 2px solid var(--border-color);
            transition: all 0.3s;
        }

        .feature-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .feature-card h4 {
            color: var(--dark-color);
            margin-bottom: 0.8rem;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .feature-card p {
            color: var(--gray-color);
            font-size: 0.95rem;
            margin-bottom: 0;
        }

        /* FAQ Section */
        .faq-section {
            margin-top: 3rem;
        }

        .faq-item {
            background: var(--light-color);
            border-radius: 8px;
            margin-bottom: 1rem;
            overflow: hidden;
        }

        .faq-question {
            padding: 1.5rem;
            font-weight: 600;
            color: var(--dark-color);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.3s;
        }

        .faq-question:hover {
            background: #f0f0f0;
        }

        .faq-question.active {
            background: var(--primary-color);
            color: white;
        }

        .faq-answer {
            padding: 0 1.5rem;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .faq-answer.active {
            padding: 1.5rem;
            max-height: 1000px;
        }

        .expand-icon {
            transition: transform 0.3s;
        }

        .faq-question.active .expand-icon {
            transform: rotate(180deg);
        }

        /* Footer */
        footer {
            background: rgba(31, 41, 55, 0.95);
            color: white;
            border-radius: 16px;
            padding: 3rem 2rem;
            margin-top: 4rem;
            backdrop-filter: blur(10px);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 3rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            color: white;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section li {
            margin-bottom: 0.8rem;
        }

        .footer-section a {
            color: #d1d5db;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-section a:hover {
            color: white;
        }

        .footer-section p {
            color: #9ca3af;
            line-height: 1.6;
        }

        .copyright {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid #374151;
            color: #9ca3af;
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
                gap: 1rem;
            }
            
            .calculator-container, .content-section {
                padding: 1.5rem;
            }
            
            .calculator-buttons {
                gap: 0.5rem;
            }
            
            .calc-btn {
                padding: 0.8rem;
                font-size: 1rem;
                min-height: 50px;
            }
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transform: translateX(150%);
            transition: transform 0.3s;
            z-index: 1000;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: var(--secondary-color);
        }

        .notification.error {
            background: var(--danger-color);
        }

        .notification.info {
            background: var(--primary-color);
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
            margin-left: 5px;
            color: var(--gray-color);
        }

        .tooltip-text {
            visibility: hidden;
            width: 200px;
            background: var(--dark-color);
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 0.5rem;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            font-weight: normal;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* Function Reference */
        .function-reference {
            background: var(--light-color);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 2rem;
        }

        .reference-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .reference-item {
            padding: 0.8rem;
            background: white;
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }

        .reference-func {
            font-family: 'Courier New', monospace;
            color: var(--primary-color);
            font-weight: 600;
        }

        .reference-desc {
            font-size: 0.9rem;
            color: var(--gray-color);
            margin-top: 0.3rem;
        }

        /* User Guide */
        .user-guide {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            border: 2px solid var(--primary-color);
        }

        .guide-step {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: white;
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
        }

        .step-number {
            background: var(--primary-color);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <h1>Scientific Calculator</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="#how-to-use">How to Use</a></li>
                    <li><a href="#features">Features</a></li>
                    <li><a href="#faq">FAQ</a></li>
                    <li><a href="#functions">Functions</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container">
        <div class="main-content">
            <!-- Calculator Section -->
            <section class="calculator-container">
                <h2 class="calculator-title">
                    <i>üßÆ</i> Advanced Scientific Calculator
                </h2>
                
                <!-- Calculator Display -->
                <div class="calculator-display">
                    <div class="expression-display" id="expressionDisplay"></div>
                    <div class="result-display" id="resultDisplay">0</div>
                </div>

                <!-- Calculator Modes -->
                <div class="calculator-modes">
                    <button class="mode-btn active" data-mode="basic">Basic</button>
                    <button class="mode-btn" data-mode="scientific">Scientific</button>
                    <button class="mode-btn" data-mode="statistics">Statistics</button>
                    <button class="mode-btn" data-mode="graphing">Graphing</button>
                </div>

                <!-- Basic Calculator Buttons -->
                <div class="calculator-buttons" id="basicButtons">
                    <!-- Row 1 -->
                    <button class="calc-btn clear" onclick="clearAll()">C</button>
                    <button class="calc-btn clear" onclick="clearEntry()">CE</button>
                    <button class="calc-btn special" onclick="backspace()">‚å´</button>
                    <button class="calc-btn operation" onclick="appendOperator('/')">√∑</button>
                    <button class="calc-btn function" onclick="sqrt()">‚àö</button>
                    
                    <!-- Row 2 -->
                    <button class="calc-btn number" onclick="appendNumber('7')">7</button>
                    <button class="calc-btn number" onclick="appendNumber('8')">8</button>
                    <button class="calc-btn number" onclick="appendNumber('9')">9</button>
                    <button class="calc-btn operation" onclick="appendOperator('*')">√ó</button>
                    <button class="calc-btn function" onclick="power()">x ∏</button>
                    
                    <!-- Row 3 -->
                    <button class="calc-btn number" onclick="appendNumber('4')">4</button>
                    <button class="calc-btn number" onclick="appendNumber('5')">5</button>
                    <button class="calc-btn number" onclick="appendNumber('6')">6</button>
                    <button class="calc-btn operation" onclick="appendOperator('-')">‚àí</button>
                    <button class="calc-btn function" onclick="factorial()">x!</button>
                    
                    <!-- Row 4 -->
                    <button class="calc-btn number" onclick="appendNumber('1')">1</button>
                    <button class="calc-btn number" onclick="appendNumber('2')">2</button>
                    <button class="calc-btn number" onclick="appendNumber('3')">3</button>
                    <button class="calc-btn operation" onclick="appendOperator('+')">+</button>
                    <button class="calc-btn function" onclick="appendConstant('œÄ')">œÄ</button>
                    
                    <!-- Row 5 -->
                    <button class="calc-btn number zero" onclick="appendNumber('0')">0</button>
                    <button class="calc-btn number" onclick="appendDecimal()">.</button>
                    <button class="calc-btn equals" onclick="calculate()">=</button>
                    <button class="calc-btn function" onclick="appendConstant('e')">e</button>
                </div>

                <!-- Scientific Buttons (Initially hidden) -->
                <div class="calculator-buttons" id="scientificButtons" style="display: none;">
                    <!-- Row 1 -->
                    <button class="calc-btn function" onclick="trigFunction('sin')">sin</button>
                    <button class="calc-btn function" onclick="trigFunction('cos')">cos</button>
                    <button class="calc-btn function" onclick="trigFunction('tan')">tan</button>
                    <button class="calc-btn function" onclick="inverseTrigFunction('asin')">sin‚Åª¬π</button>
                    <button class="calc-btn function" onclick="inverseTrigFunction('acos')">cos‚Åª¬π</button>
                    
                    <!-- Row 2 -->
                    <button class="calc-btn function" onclick="inverseTrigFunction('atan')">tan‚Åª¬π</button>
                    <button class="calc-btn function" onclick="logFunction('log')">log</button>
                    <button class="calc-btn function" onclick="logFunction('ln')">ln</button>
                    <button class="calc-btn function" onclick="expFunction()">eÀ£</button>
                    <button class="calc-btn function" onclick="absFunction()">|x|</button>
                    
                    <!-- Row 3 -->
                    <button class="calc-btn function" onclick="mathFunction('floor')">‚åäx‚åã</button>
                    <button class="calc-btn function" onclick="mathFunction('ceil')">‚åàx‚åâ</button>
                    <button class="calc-btn function" onclick="mathFunction('round')">round</button>
                    <button class="calc-btn function" onclick="appendOperator('%')">mod</button>
                    <button class="calc-btn function" onclick="randomNumber()">Rand</button>
                    
                    <!-- Row 4 -->
                    <button class="calc-btn function" onclick="toggleAngleMode('deg')">deg</button>
                    <button class="calc-btn function" onclick="toggleAngleMode('rad')">rad</button>
                    <button class="calc-btn function" onclick="hypotFunction()">hypot</button>
                    <button class="calc-btn function" onclick="nCr()">nCr</button>
                    <button class="calc-btn function" onclick="nPr()">nPr</button>
                </div>

                <!-- Statistics Buttons (Initially hidden) -->
                <div class="calculator-buttons" id="statisticsButtons" style="display: none;">
                    <!-- Statistics functions would go here -->
                    <button class="calc-btn function" onclick="mean()">Mean</button>
                    <button class="calc-btn function" onclick="median()">Median</button>
                    <button class="calc-btn function" onclick="stdDev()">Std Dev</button>
                    <button class="calc-btn function" onclick="variance()">Variance</button>
                    <button class="calc-btn function" onclick="correlation()">Correlation</button>
                </div>

                <!-- Memory Functions -->
                <div class="calculator-memory">
                    <button class="memory-btn" onclick="memoryClear()">MC</button>
                    <button class="memory-btn" onclick="memoryRecall()">MR</button>
                    <button class="memory-btn" onclick="memoryAdd()">M+</button>
                    <button class="memory-btn" onclick="memorySubtract()">M-</button>
                    <button class="memory-btn" onclick="memoryStore()">MS</button>
                </div>

                <!-- Additional Functions -->
                <div style="display: flex; gap: 0.8rem; margin-top: 1rem;">
                    <button class="calc-btn special" onclick="toggleHistory()" id="historyToggle">Show History</button>
                    <button class="calc-btn special" onclick="copyResult()">Copy Result</button>
                    <button class="calc-btn special" onclick="toggleSettings()">Settings</button>
                </div>

                <!-- Calculator History -->
                <div class="calculator-history" id="calculatorHistory" style="display: none;">
                    <div class="history-title">
                        <span>Calculation History</span>
                        <button class="memory-btn" onclick="clearHistory()" style="padding: 0.3rem 0.8rem; font-size: 0.8rem;">
                            Clear
                        </button>
                    </div>
                    <ul class="history-list" id="historyList">
                        <!-- History items will be inserted here -->
                    </ul>
                </div>

                <!-- Settings Panel -->
                <div class="calculator-history" id="settingsPanel" style="display: none;">
                    <div class="history-title">
                        <span>Calculator Settings</span>
                        <button class="memory-btn" onclick="toggleSettings()" style="padding: 0.3rem 0.8rem; font-size: 0.8rem;">
                            Close
                        </button>
                    </div>
                    <div style="padding: 1rem;">
                        <div style="margin-bottom: 1rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Angle Mode:</label>
                            <div style="display: flex; gap: 1rem;">
                                <button class="mode-btn" onclick="setAngleMode('deg')" id="degBtn">Degrees</button>
                                <button class="mode-btn active" onclick="setAngleMode('rad')" id="radBtn">Radians</button>
                            </div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Number Format:</label>
                            <div style="display: flex; gap: 1rem;">
                                <button class="mode-btn active" onclick="setNumberFormat('decimal')" id="decimalBtn">Decimal</button>
                                <button class="mode-btn" onclick="setNumberFormat('scientific')" id="scientificBtn">Scientific</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Content Section -->
            <section class="content-section">
                <h2>Complete User Guide: How to Use This Scientific Calculator</h2>
                
                <div class="user-guide">
                    <h3 style="color: var(--primary-color); margin-bottom: 1.5rem;">üöÄ Quick Start Guide</h3>
                    
                    <div class="guide-step">
                        <div class="step-number">1</div>
                        <div>
                            <strong>Enter Numbers:</strong> Click number buttons (0-9) or type on your keyboard
                        </div>
                    </div>
                    
                    <div class="guide-step">
                        <div class="step-number">2</div>
                        <div>
                            <strong>Basic Operations:</strong> Use +, -, √ó, √∑ buttons for arithmetic
                        </div>
                    </div>
                    
                    <div class="guide-step">
                        <div class="step-number">3</div>
                        <div>
                            <strong>Calculate:</strong> Press = button or Enter key to get results
                        </div>
                    </div>
                    
                    <div class="guide-step">
                        <div class="step-number">4</div>
                        <div>
                            <strong>Advanced Functions:</strong> Switch to Scientific mode for more functions
                        </div>
                    </div>
                </div>

                <h3 id="how-to-use">üìö Detailed Usage Instructions</h3>
                
                <h4>Basic Calculator Operations:</h4>
                <ol>
                    <li><strong>Addition/Subtraction:</strong> Enter first number ‚Üí + or - ‚Üí second number ‚Üí =</li>
                    <li><strong>Multiplication/Division:</strong> Enter first number ‚Üí √ó or √∑ ‚Üí second number ‚Üí =</li>
                    <li><strong>Clear Functions:</strong>
                        <ul>
                            <li><strong>C (Clear):</strong> Clears everything</li>
                            <li><strong>CE (Clear Entry):</strong> Clears current entry only</li>
                            <li><strong>‚å´ (Backspace):</strong> Removes last character</li>
                        </ul>
                    </li>
                    <li><strong>Decimal Point:</strong> Use . button for decimal numbers</li>
                </ol>
                
                <h4>Scientific Functions:</h4>
                <ol>
                    <li><strong>Trigonometric Functions:</strong> sin, cos, tan (works in degrees or radians)</li>
                    <li><strong>Inverse Trig:</strong> sin‚Åª¬π, cos‚Åª¬π, tan‚Åª¬π</li>
                    <li><strong>Logarithms:</strong> log (base 10), ln (natural log)</li>
                    <li><strong>Exponential:</strong> eÀ£ calculates e raised to power x</li>
                    <li><strong>Square Root:</strong> ‚àö calculates square root</li>
                    <li><strong>Power:</strong> x ∏ raises x to the power y</li>
                    <li><strong>Factorial:</strong> x! calculates factorial of x</li>
                    <li><strong>Constants:</strong> œÄ (3.14159...), e (2.71828...)</li>
                </ol>
                
                <h4>Memory Functions:</h4>
                <ul>
                    <li><strong>MC:</strong> Memory Clear - Clears memory storage</li>
                    <li><strong>MR:</strong> Memory Recall - Recalls value from memory</li>
                    <li><strong>M+:</strong> Memory Add - Adds current value to memory</li>
                    <li><strong>M-:</strong> Memory Subtract - Subtracts current value from memory</li>
                    <li><strong>MS:</strong> Memory Store - Stores current value in memory</li>
                </ul>
                
                <h4>Keyboard Shortcuts:</h4>
                <ul>
                    <li><strong>Numbers:</strong> 0-9 keys</li>
                    <li><strong>Operators:</strong> +, -, *, /</li>
                    <li><strong>Enter:</strong> = (equals)</li>
                    <li><strong>Escape:</strong> Clear (C)</li>
                    <li><strong>Backspace:</strong> Remove last character</li>
                    <li><strong>Decimal:</strong> . key</li>
                </ul>

                <h3 id="features">‚ú® Key Features & Capabilities</h3>
                <div class="features-grid">
                    <div class="feature-card">
                        <h4><i>üî¢</i> Basic Arithmetic</h4>
                        <p>Addition, subtraction, multiplication, division, percentages, and square roots</p>
                    </div>
                    <div class="feature-card">
                        <h4><i>üìê</i> Scientific Functions</h4>
                        <p>Trigonometry, logarithms, exponentials, factorials, and statistical functions</p>
                    </div>
                    <div class="feature-card">
                        <h4><i>üíæ</i> Memory Operations</h4>
                        <p>Multiple memory registers with store, recall, add, and subtract functions</p>
                    </div>
                    <div class="feature-card">
                        <h4><i>üìä</i> Statistics Mode</h4>
                        <p>Mean, median, standard deviation, variance, and correlation calculations</p>
                    </div>
                    <div class="feature-card">
                        <h4><i>üéØ</i> Precision Control</h4>
                        <p>Adjustable decimal places and scientific notation for accurate results</p>
                    </div>
                    <div class="feature-card">
                        <h4><i>üìà</i> Graphing Tools</h4>
                        <p>Plot mathematical functions and visualize equations (coming soon)</p>
                    </div>
                    <div class="feature-card">
                        <h4><i>üì±</i> Responsive Design</h4>
                        <p>Works perfectly on desktop, tablet, and mobile devices</p>
                    </div>
                    <div class="feature-card">
                        <h4><i>üíæ</i> History Tracking</h4>
                        <p>Saves calculation history with timestamp and recall capability</p>
                    </div>
                </div>

                <h3 id="functions">üßÆ Mathematical Functions Reference</h3>
                
                <h4>Trigonometric Functions:</h4>
                <div class="function-reference">
                    <div class="reference-grid">
                        <div class="reference-item">
                            <div class="reference-func">sin(x)</div>
                            <div class="reference-desc">Sine of angle x</div>
                        </div>
                        <div class="reference-item">
                            <div class="reference-func">cos(x)</div>
                            <div class="reference-desc">Cosine of angle x</div>
                        </div>
                        <div class="reference-item">
                            <div class="reference-func">tan(x)</div>
                            <div class="reference-desc">Tangent of angle x</div>
                        </div>
                        <div class="reference-item">
                            <div class="reference-func">asin(x)</div>
                            <div class="reference-desc">Inverse sine</div>
                        </div>
                        <div class="reference-item">
                            <div class="reference-func">acos(x)</div>
                            <div class="reference-desc">Inverse cosine</div>
                        </div>
                        <div class="reference-item">
                            <div class="reference-func">atan(x)</div>
                            <div class="reference-desc">Inverse tangent</div>
                        </div>
                    </div>
                </div>
                
                <h4>Logarithmic & Exponential:</h4>
                <div class="function-reference">
                    <div class="reference-grid">
                        <div class="reference-item">
                            <div class="reference-func">log(x)</div>
                            <div class="reference-desc">Base-10 logarithm</div>
                        </div>
                        <div class="reference-item">
                            <div class="reference-func">ln(x)</div>
                            <div class="reference-desc">Natural logarithm</div>
                        </div>
                        <div class="reference-item">
                            <div class="reference-func">exp(x)</div>
                            <div class="reference-desc">Exponential e^x</div>
                        </div>
                        <div class="reference-item">
                            <div class="reference-func">x^y</div>
                            <div class="reference-desc">x raised to power y</div>
                        </div>
                        <div class="reference-item">
                            <div class="reference-func">‚àöx</div>
                            <div class="reference-desc">Square root</div>
                        </div>
                        <div class="reference-item">
                            <div class="reference-func">x!</div>
                            <div class="reference-desc">Factorial</div>
                        </div>
                    </div>
                </div>
                
                <h4>Other Functions:</h4>
                <div class="function-reference">
                    <div class="reference-grid">
                        <div class="reference-item">
                            <div class="reference-func">|x|</div>
                            <div class="reference-desc">Absolute value</div>
                        </div>
                        <div class="reference-item">
                            <div class="reference-func">floor(x)</div>
                            <div class="reference-desc">Round down</div>
                        </div>
                        <div class="reference-item">
                            <div class="reference-func">ceil(x)</div>
                            <div class="reference-desc">Round up</div>
                        </div>
                        <div class="reference-item">
                            <div class="reference-func">round(x)</div>
                            <div class="reference-desc">Round to nearest</div>
                        </div>
                        <div class="reference-item">
                            <div class="reference-func">nCr</div>
                            <div class="reference-desc">Combinations</div>
                        </div>
                        <div class="reference-item">
                            <div class="reference-func">nPr</div>
                            <div class="reference-desc">Permutations</div>
                        </div>
                    </div>
                </div>

                <h3 id="faq">‚ùì Frequently Asked Questions</h3>
                <div class="faq-section">
                    <div class="faq-item">
                        <div class="faq-question">
                            <span>How accurate is this calculator?</span>
                            <span class="expand-icon">‚ñº</span>
                        </div>
                        <div class="faq-answer">
                            <p>Our calculator uses JavaScript's Math library with double-precision floating-point arithmetic, providing about 15-17 significant digits of precision. This is sufficient for most scientific and engineering applications.</p>
                        </div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question">
                            <span>Can I use keyboard shortcuts?</span>
                            <span class="expand-icon">‚ñº</span>
                        </div>
                        <div class="faq-answer">
                            <p>Yes! You can use your keyboard for all basic operations. Numbers (0-9), operators (+, -, *, /), Enter (=), Escape (clear), Backspace (delete last), and period (.) for decimal.</p>
                        </div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question">
                            <span>How do I calculate complex expressions?</span>
                            <span class="expand-icon">‚ñº</span>
                        </div>
                        <div class="faq-answer">
                            <p>Enter your expression step by step. For example: (3 + 4) √ó 2 √∑ sin(30). The calculator follows standard mathematical order of operations (PEMDAS/BODMAS).</p>
                        </div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question">
                            <span>Is my calculation history saved?</span>
                            <span class="expand-icon">‚ñº</span>
                        </div>
                        <div class="faq-answer">
                            <p>Yes, calculation history is automatically saved in your browser's local storage. You can view, recall, or clear history using the History button.</p>
                        </div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question">
                            <span>What's the difference between degrees and radians?</span>
                            <span class="expand-icon">‚ñº</span>
                        </div>
                        <div class="faq-answer">
                            <p>Degrees and radians are two ways to measure angles. Degrees use 360¬∞ in a circle, while radians use 2œÄ. Most scientific work uses radians, but you can switch modes in settings.</p>
                        </div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question">
                            <span>Can I use this on my mobile phone?</span>
                            <span class="expand-icon">‚ñº</span>
                        </div>
                        <div class="faq-answer">
                            <p>Absolutely! The calculator is fully responsive and works perfectly on all devices - desktop, tablet, and mobile phones.</p>
                        </div>
                    </div>
                </div>

                <h3>üéØ Practical Examples</h3>
                <p><strong>Example 1: Basic Calculation</strong><br>
                To calculate 15% of 200: 200 √ó 15 √∑ 100 = 30</p>
                
                <p><strong>Example 2: Scientific Calculation</strong><br>
                To calculate sin(45¬∞) √ó cos(45¬∞): Switch to degrees mode ‚Üí sin(45) √ó cos(45) = 0.5</p>
                
                <p><strong>Example 3: Statistics</strong><br>
                To find mean of 5, 10, 15: Enter numbers separated by commas in statistics mode</p>
                
                <p><strong>Example 4: Complex Expression</strong><br>
                (3¬≤ + 4¬≤) √∑ ‚àö25 = (9 + 16) √∑ 5 = 5</p>

                <h3>üîß Tips & Tricks</h3>
                <ul>
                    <li>Use parentheses ( ) to control calculation order</li>
                    <li>Memory functions are great for multi-step calculations</li>
                    <li>Switch between decimal and scientific notation in settings</li>
                    <li>Use the copy button to save results for later</li>
                    <li>History feature lets you review and reuse past calculations</li>
                    <li>Angle mode affects trigonometric calculations - set it correctly</li>
                </ul>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Scientific Calculator</h3>
                    <p>Advanced online scientific calculator with comprehensive mathematical functions, graphing capabilities, and professional tools for students, engineers, and scientists.</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#how-to-use">How to Use</a></li>
                        <li><a href="#features">Features</a></li>
                        <li><a href="#faq">FAQ</a></li>
                        <li><a href="#functions">Functions</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Calculation Modes</h3>
                    <ul>
                        <li>Basic Calculator</li>
                        <li>Scientific Calculator</li>
                        <li>Statistics Calculator</li>
                        <li>Graphing Calculator</li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Contact & Support</h3>
                    <p>This calculator is completely free with no limitations. All calculations happen locally in your browser for maximum privacy and performance.</p>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2024 Scientific Calculator Tool. All rights reserved. This tool is free for educational and professional use.</p>
                <p style="margin-top: 0.5rem; font-size: 0.8rem;">Last updated: December 2024 | Version 2.0</p>
            </div>
        </div>
    </footer>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <script>
        // Calculator State
        let calculator = {
            display: '0',
            expression: '',
            memory: 0,
            history: [],
            angleMode: 'rad',
            numberFormat: 'decimal',
            isScientificMode: false
        };

        // DOM Elements
        const expressionDisplay = document.getElementById('expressionDisplay');
        const resultDisplay = document.getElementById('resultDisplay');
        const notification = document.getElementById('notification');

        // Initialize calculator
        function initCalculator() {
            loadHistory();
            updateDisplay();
            setupEventListeners();
            showNotification('Scientific Calculator Ready!', 'success');
        }

        // Setup event listeners
        function setupEventListeners() {
            // Mode switching
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const mode = this.getAttribute('data-mode');
                    switchMode(mode);
                    
                    // Update active button
                    document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // Keyboard support
            document.addEventListener('keydown', handleKeyboard);
            
            // FAQ expansion
            document.querySelectorAll('.faq-question').forEach(question => {
                question.addEventListener('click', function() {
                    this.classList.toggle('active');
                    const answer = this.nextElementSibling;
                    answer.classList.toggle('active');
                });
            });
        }

        // Switch calculator mode
        function switchMode(mode) {
            const basicButtons = document.getElementById('basicButtons');
            const scientificButtons = document.getElementById('scientificButtons');
            const statisticsButtons = document.getElementById('statisticsButtons');
            
            switch(mode) {
                case 'basic':
                    basicButtons.style.display = 'grid';
                    scientificButtons.style.display = 'none';
                    statisticsButtons.style.display = 'none';
                    calculator.isScientificMode = false;
                    showNotification('Basic Mode Activated', 'info');
                    break;
                    
                case 'scientific':
                    basicButtons.style.display = 'grid';
                    scientificButtons.style.display = 'grid';
                    statisticsButtons.style.display = 'none';
                    calculator.isScientificMode = true;
                    showNotification('Scientific Mode Activated', 'info');
                    break;
                    
                case 'statistics':
                    basicButtons.style.display = 'none';
                    scientificButtons.style.display = 'none';
                    statisticsButtons.style.display = 'grid';
                    calculator.isScientificMode = true;
                    showNotification('Statistics Mode Activated', 'info');
                    break;
                    
                case 'graphing':
                    showNotification('Graphing Mode Coming Soon!', 'info');
                    break;
            }
        }

        // Append number to display
        function appendNumber(num) {
            if (calculator.display === '0' || calculator.display === 'Error') {
                calculator.display = num;
            } else {
                calculator.display += num;
            }
            updateDisplay();
        }

        // Append operator
        function appendOperator(op) {
            if (calculator.display === 'Error') return;
            
            const operators = ['+', '-', '*', '/', '%'];
            const lastChar = calculator.display.slice(-1);
            
            if (operators.includes(lastChar)) {
                // Replace last operator
                calculator.display = calculator.display.slice(0, -1) + op;
            } else {
                calculator.display += op;
            }
            updateDisplay();
        }

        // Append decimal point
        function appendDecimal() {
            if (calculator.display === 'Error') return;
            
            const lastNumber = calculator.display.split(/[\+\-\*\/]/).pop();
            if (!lastNumber.includes('.')) {
                calculator.display += '.';
                updateDisplay();
            }
        }

        // Append constant
        function appendConstant(constant) {
            if (calculator.display === '0' || calculator.display === 'Error') {
                calculator.display = constant === 'œÄ' ? Math.PI.toString() : Math.E.toString();
            } else {
                calculator.display += constant === 'œÄ' ? Math.PI.toString() : Math.E.toString();
            }
            updateDisplay();
        }

        // Clear all
        function clearAll() {
            calculator.display = '0';
            calculator.expression = '';
            updateDisplay();
        }

        // Clear entry
        function clearEntry() {
            calculator.display = '0';
            updateDisplay();
        }

        // Backspace
        function backspace() {
            if (calculator.display.length > 1) {
                calculator.display = calculator.display.slice(0, -1);
            } else {
                calculator.display = '0';
            }
            updateDisplay();
        }

        // Calculate result
        function calculate() {
            try {
                let expression = calculator.display
                    .replace(/√ó/g, '*')
                    .replace(/√∑/g, '/')
                    .replace(/œÄ/g, Math.PI.toString())
                    .replace(/e/g, Math.E.toString())
                    .replace(/\^/g, '**');
                
                // Evaluate safely
                const result = Function('"use strict"; return (' + expression + ')')();
                
                // Format result
                let formattedResult;
                if (calculator.numberFormat === 'scientific' && Math.abs(result) > 10000) {
                    formattedResult = result.toExponential(6);
                } else {
                    formattedResult = parseFloat(result.toFixed(10)).toString();
                }
                
                // Save to history
                addToHistory(calculator.display, formattedResult);
                
                // Update display
                calculator.expression = calculator.display;
                calculator.display = formattedResult;
                updateDisplay();
                
            } catch (error) {
                calculator.display = 'Error';
                updateDisplay();
                showNotification('Calculation Error', 'error');
            }
        }

        // Square root function
        function sqrt() {
            try {
                const value = parseFloat(calculator.display);
                if (value >= 0) {
                    calculator.display = Math.sqrt(value).toString();
                    updateDisplay();
                } else {
                    calculator.display = 'Error';
                    updateDisplay();
                    showNotification('Cannot calculate square root of negative number', 'error');
                }
            } catch (error) {
                calculator.display = 'Error';
                updateDisplay();
            }
        }

        // Power function
        function power() {
            calculator.display += '^';
            updateDisplay();
        }

        // Factorial function
        function factorial() {
            try {
                const n = parseInt(calculator.display);
                if (n < 0 || n > 100) {
                    calculator.display = 'Error';
                    showNotification('Invalid factorial input', 'error');
                } else {
                    let result = 1;
                    for (let i = 2; i <= n; i++) {
                        result *= i;
                    }
                    calculator.display = result.toString();
                }
                updateDisplay();
            } catch (error) {
                calculator.display = 'Error';
                updateDisplay();
            }
        }

        // Trigonometric functions
        function trigFunction(func) {
            try {
                const value = parseFloat(calculator.display);
                let result;
                
                if (calculator.angleMode === 'deg') {
                    const radians = value * Math.PI / 180;
                    result = Math[func](radians);
                } else {
                    result = Math[func](value);
                }
                
                calculator.display = result.toString();
                updateDisplay();
            } catch (error) {
                calculator.display = 'Error';
                updateDisplay();
            }
        }

        // Inverse trigonometric functions
        function inverseTrigFunction(func) {
            try {
                const value = parseFloat(calculator.display);
                let result = Math[func.slice(1)](value); // Remove 'a' from asin, acos, atan
                
                if (calculator.angleMode === 'deg') {
                    result = result * 180 / Math.PI;
                }
                
                calculator.display = result.toString();
                updateDisplay();
            } catch (error) {
                calculator.display = 'Error';
                updateDisplay();
            }
        }

        // Logarithm functions
        function logFunction(func) {
            try {
                const value = parseFloat(calculator.display);
                if (value <= 0) {
                    calculator.display = 'Error';
                    showNotification('Logarithm undefined for non-positive numbers', 'error');
                } else {
                    const result = func === 'log' ? Math.log10(value) : Math.log(value);
                    calculator.display = result.toString();
                }
                updateDisplay();
            } catch (error) {
                calculator.display = 'Error';
                updateDisplay();
            }
        }

        // Exponential function
        function expFunction() {
            try {
                const value = parseFloat(calculator.display);
                const result = Math.exp(value);
                calculator.display = result.toString();
                updateDisplay();
            } catch (error) {
                calculator.display = 'Error';
                updateDisplay();
            }
        }

        // Absolute value
        function absFunction() {
            try {
                const value = parseFloat(calculator.display);
                calculator.display = Math.abs(value).toString();
                updateDisplay();
            } catch (error) {
                calculator.display = 'Error';
                updateDisplay();
            }
        }

        // Math functions (floor, ceil, round)
        function mathFunction(func) {
            try {
                const value = parseFloat(calculator.display);
                const result = Math[func](value);
                calculator.display = result.toString();
                updateDisplay();
            } catch (error) {
                calculator.display = 'Error';
                updateDisplay();
            }
        }

        // Random number
        function randomNumber() {
            calculator.display = Math.random().toFixed(4);
            updateDisplay();
        }

        // Toggle angle mode
        function toggleAngleMode(mode) {
            calculator.angleMode = mode;
            document.getElementById('degBtn').classList.toggle('active', mode === 'deg');
            document.getElementById('radBtn').classList.toggle('active', mode === 'rad');
            showNotification(`Angle mode set to ${mode === 'deg' ? 'Degrees' : 'Radians'}`, 'info');
        }

        // Set angle mode
        function setAngleMode(mode) {
            calculator.angleMode = mode;
            document.getElementById('degBtn').classList.toggle('active', mode === 'deg');
            document.getElementById('radBtn').classList.toggle('active', mode === 'rad');
            showNotification(`Angle mode set to ${mode === 'deg' ? 'Degrees' : 'Radians'}`, 'info');
        }

        // Set number format
        function setNumberFormat(format) {
            calculator.numberFormat = format;
            document.getElementById('decimalBtn').classList.toggle('active', format === 'decimal');
            document.getElementById('scientificBtn').classList.toggle('active', format === 'scientific');
            showNotification(`Number format set to ${format}`, 'info');
        }

        // Hypot function
        function hypotFunction() {
            calculator.display += 'hypot(';
            updateDisplay();
        }

        // nCr function
        function nCr() {
            calculator.display += 'nCr(';
            updateDisplay();
        }

        // nPr function
        function nPr() {
            calculator.display += 'nPr(';
            updateDisplay();
        }

        // Statistics functions
        function mean() {
            showNotification('Mean function - Enter comma separated values', 'info');
        }

        function median() {
            showNotification('Median function - Enter comma separated values', 'info');
        }

        function stdDev() {
            showNotification('Standard Deviation function', 'info');
        }

        function variance() {
            showNotification('Variance function', 'info');
        }

        function correlation() {
            showNotification('Correlation function', 'info');
        }

        // Memory functions
        function memoryClear() {
            calculator.memory = 0;
            showNotification('Memory Cleared', 'info');
        }

        function memoryRecall() {
            calculator.display = calculator.memory.toString();
            updateDisplay();
            showNotification('Memory Recalled', 'info');
        }

        function memoryAdd() {
            try {
                const currentValue = parseFloat(calculator.display) || 0;
                calculator.memory += currentValue;
                showNotification('Added to Memory', 'info');
            } catch (error) {
                showNotification('Memory Error', 'error');
            }
        }

        function memorySubtract() {
            try {
                const currentValue = parseFloat(calculator.display) || 0;
                calculator.memory -= currentValue;
                showNotification('Subtracted from Memory', 'info');
            } catch (error) {
                showNotification('Memory Error', 'error');
            }
        }

        function memoryStore() {
            try {
                const currentValue = parseFloat(calculator.display) || 0;
                calculator.memory = currentValue;
                showNotification('Stored in Memory', 'info');
            } catch (error) {
                showNotification('Memory Error', 'error');
            }
        }

        // Toggle history
        function toggleHistory() {
            const historyPanel = document.getElementById('calculatorHistory');
            const isVisible = historyPanel.style.display === 'block';
            historyPanel.style.display = isVisible ? 'none' : 'block';
            document.getElementById('historyToggle').textContent = 
                isVisible ? 'Show History' : 'Hide History';
        }

        // Toggle settings
        function toggleSettings() {
            const settingsPanel = document.getElementById('settingsPanel');
            const historyPanel = document.getElementById('calculatorHistory');
            const isVisible = settingsPanel.style.display === 'block';
            
            settingsPanel.style.display = isVisible ? 'none' : 'block';
            historyPanel.style.display = 'none';
            document.getElementById('historyToggle').textContent = 'Show History';
        }

        // Copy result to clipboard
        async function copyResult() {
            try {
                await navigator.clipboard.writeText(calculator.display);
                showNotification('Result copied to clipboard!', 'success');
            } catch (error) {
                showNotification('Failed to copy result', 'error');
            }
        }

        // Add calculation to history
        function addToHistory(expression, result) {
            const historyItem = {
                id: Date.now(),
                expression: expression,
                result: result,
                timestamp: new Date().toLocaleTimeString()
            };
            
            calculator.history.unshift(historyItem);
            if (calculator.history.length > 20) {
                calculator.history = calculator.history.slice(0, 20);
            }
            
            saveHistory();
            updateHistoryDisplay();
        }

        // Save history to localStorage
        function saveHistory() {
            localStorage.setItem('calculatorHistory', JSON.stringify(calculator.history));
        }

        // Load history from localStorage
        function loadHistory() {
            const savedHistory = localStorage.getItem('calculatorHistory');
            if (savedHistory) {
                calculator.history = JSON.parse(savedHistory);
                updateHistoryDisplay();
            }
        }

        // Update history display
        function updateHistoryDisplay() {
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = '';
            
            if (calculator.history.length === 0) {
                const li = document.createElement('li');
                li.className = 'history-item';
                li.textContent = 'No calculation history yet';
                historyList.appendChild(li);
                return;
            }
            
            calculator.history.forEach(item => {
                const li = document.createElement('li');
                li.className = 'history-item';
                li.innerHTML = `
                    <div class="history-expression">${item.expression}</div>
                    <div class="history-result">= ${item.result}</div>
                    <div style="font-size: 0.8rem; color: #94a3b8;">${item.timestamp}</div>
                `;
                
                li.addEventListener('click', () => {
                    calculator.display = item.expression;
                    updateDisplay();
                    showNotification('Expression loaded from history', 'info');
                });
                
                historyList.appendChild(li);
            });
        }

        // Clear history
        function clearHistory() {
            if (confirm('Clear all calculation history?')) {
                calculator.history = [];
                localStorage.removeItem('calculatorHistory');
                updateHistoryDisplay();
                showNotification('History cleared', 'success');
            }
        }

        // Update display
        function updateDisplay() {
            expressionDisplay.textContent = calculator.display;
            
            // Format result display
            if (calculator.display === 'Error') {
                resultDisplay.textContent = 'Error';
                resultDisplay.style.color = '#ef4444';
            } else {
                let displayValue = calculator.display;
                
                // Format large numbers
                if (calculator.numberFormat === 'scientific' && calculator.display.length > 10) {
                    const num = parseFloat(calculator.display);
                    if (!isNaN(num)) {
                        displayValue = num.toExponential(6);
                    }
                }
                
                resultDisplay.textContent = displayValue;
                resultDisplay.style.color = '#ffffff';
            }
        }

        // Handle keyboard input
        function handleKeyboard(event) {
            const key = event.key;
            
            // Prevent default for calculator keys
            if (/[\d+\-*/.=()]|Enter|Backspace|Escape/.test(key)) {
                event.preventDefault();
            }
            
            if (key >= '0' && key <= '9') {
                appendNumber(key);
            } else if (key === '.') {
                appendDecimal();
            } else if (key === '+') {
                appendOperator('+');
            } else if (key === '-') {
                appendOperator('-');
            } else if (key === '*') {
                appendOperator('*');
            } else if (key === '/') {
                appendOperator('/');
            } else if (key === 'Enter' || key === '=') {
                calculate();
            } else if (key === 'Escape') {
                clearAll();
            } else if (key === 'Backspace') {
                backspace();
            } else if (key === '(') {
                calculator.display += '(';
                updateDisplay();
            } else if (key === ')') {
                calculator.display += ')';
                updateDisplay();
            }
        }

        // Show notification
        function showNotification(message, type) {
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Initialize calculator when page loads
        document.addEventListener('DOMContentLoaded', initCalculator);
    </script>
</body>
</html>
